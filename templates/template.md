<!-- BEGIN: CLAUDE.md -->

## AI 行为准则 (AI Guidelines)

### 1. Memory Bank（.memory-bank/）

**文件结构**：
- `PROJECT.md` - 技术规范 + 经验教训（静态，很少改）
- `MODULES.md` - 功能模块 + 待办问题（新会话必读）
- `TASK.md` - 当前任务规划（可选，复杂任务时使用）

**读取策略**：
- 新会话开始 → 读 `MODULES.md`（了解功能模块）
- 技术决策时 → 读 `PROJECT.md`（了解约束和经验）
- 复杂任务时 → 读/写 `TASK.md`（规划和追踪）

**更新策略 (防腐烂)**：
- **功能完成** → 更新 `MODULES.md` 功能清单
- **踩坑教训** → 追加到 `PROJECT.md` 经验教训
- **发现问题** → 记录到 `MODULES.md` 待办问题
- **强制同步**：提交代码前必须判断"改动是否改变了系统行为/架构"？若是，必须更新文档，否则会导致 AI 幻觉。

**原则**：简单任务（Typo/格式化/微小重构）直接执行，无需更新 Memory Bank。

---

### 2. 自审 Checklist

代码完成后自检：
- [ ] 执行打包命令验证（如 `npm run build`）
- [ ] **文档同步**：改动是否已更新到 `MODULES.md` / `PROJECT.md`？
- [ ] 是否符合 `PROJECT.md` 技术约束？
- [ ] 是否符合 `PROJECT.md` 量化指标？（超限时重构）
- [ ] 是否引入未声明依赖？（需记录到 PROJECT.md）
- [ ] 是否有冗余代码可删除？
- [ ] 是否存在安全风险（注入、XSS 等）？

---

### 3. 受阻处理

同一问题尝试 2 次仍失败时，**停止修补**，退一步评估：
- 方案本身是否合理？
- 是否有更简单的替代方案？
- 无法解决的问题记录到 `MODULES.md` 待办

**决策优先级**：技术约束 > 已有代码风格 > 简单方案 > 未来扩展

---

### 4. 强制确认点

执行以下操作前必须请求用户确认：
- 修改 `PROJECT.md` 中的核心技术栈
- 引入重量级第三方依赖
- 执行破坏性操作（删除大量代码、数据库迁移）

<!-- END: CLAUDE.md -->

<!-- BEGIN: PROJECT.md -->

# 项目技术规范 (Project Technical Spec)

## 一、技术栈

### 核心（不可变）

| 技术 | 版本 | 原因 |
|-----|------|------|
| [框架] | [版本] | [为什么选择这个技术] |

### 偏好（建议遵循，可讨论）

| 偏好 | 原因 | 例外情况 |
|-----|------|---------|
| [技术偏好] | [原因] | [何时可以例外] |

### 已引入依赖

| 依赖 | 用途 | 引入原因 |
|-----|------|---------|
| [依赖名] | [用途] | [为什么引入] |

---

## 二、模块边界

### 目录结构

```
src/
├── [目录]/    # [职责说明]
```

### 依赖规则

```
[模块A] → [模块B], [模块C]
[模块B] → [模块D]
```

---

## 三、代码风格

### 命名规范

| 类型 | 风格 | 示例 |
|-----|------|------|
| 组件 | PascalCase | `UserCard.vue` |
| 函数 | camelCase | `fetchUserData` |

### 量化指标

- 单函数 < 80 行，单文件 < 500 行
- 嵌套层级 < 4 层
- 重复代码块 > 3 处需抽象

---

## 四、经验教训

### [问题标题]
- **问题**：[问题现象]
- **解法**：[有效的解决方案]
- **教训**：[可复用的经验总结]

---

**版本**: v3.0 | **更新**: [日期]

<!-- END: PROJECT.md -->

<!-- BEGIN: MODULES.md -->

# 功能模块清单 (Module Registry)

## 一、产品概述

**系统定位**：[一句话描述项目是什么]

**核心价值**：
- [价值点 1]
- [价值点 2]

---

## 二、功能模块

### 模块 1: [模块名称]

| 路由 | 页面 | 功能 |
|------|------|------|
| `/` | [PageName] | [功能描述] |

### 模块 2: [模块名称]

| 组件/Store | 职责 |
|------------|------|
| [名称] | [职责说明] |

---

## 三、待办问题

### P0-[类别][序号]: [问题标题]

**问题**：[问题现象]

**根因**：[可选，根本原因分析]

**方案**：[解决方案]

**状态**: [排查中/已规划/进行中] | **优先级**: P0

---

**版本**: v3.0 | **更新**: [日期]

<!-- END: MODULES.md -->

<!-- BEGIN: TASK.md -->

# 当前任务 (Active Task)

> 本文件可选使用，仅在复杂任务需要规划时填写。简单任务可直接执行。

---

## 任务信息

**任务**：[任务标题]
**目标**：[期望达成的结果]
**状态**：待开始 | 执行中 | 已完成

---

## 执行步骤

- [ ] 步骤 1
- [ ] 步骤 2
- [ ] 步骤 3

---

## 验证标准

- [如何验证任务完成]

---

## 工作现场

**关注文件**：
- [当前正在修改的文件]

**技术决策**：
- [本次任务的关键技术选择]

---

**更新**: [日期]

<!-- END: TASK.md -->
